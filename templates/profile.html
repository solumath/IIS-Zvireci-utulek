{% extends 'base.html' %}
{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}" />
    <script type="text/javascript" src="{{ url_for('static', filename='js/profile.js') }}"></script>
{% endblock %}

{% block body %}
<!-- Showcase -->
<section class="p-3 bg-dark text-white text-center text-sm-start">
    <div class="container">
        <h1>Vítej {{ current_user.name }}</h1>
    </div>
</section>

<section class="bg-light p-5 p-lg-0 pt-lg-5 text-center text-sm-start">
  <div class="container">
    <table class="table table-striped table-bordered align-middle">
        <thead class="table-dark">
          <tr>
            <th scope="col" colspan="2">Informace</th>
          </tr>
        </thead>
        <tbody>
            {%  for key, value in user_info.items() %}
            <tr>
                <th scope="row">{{ key }}</th>
                <td>{{ value }}</td>
            </tr>
            {% endfor %}
        </tbody>
      </table>
        <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#futureEvents" type="button" role="tab" aria-controls="futureEvents" aria-selected="true">Budoucí procházky</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#pastEvents" type="button" role="tab" aria-controls="pastEvents" aria-selected="false">Historie</button>
          </li>
        </ul>
        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active" id="futureEvents" role="tabpanel" aria-labelledby="home-tab">
            <table class="table table-striped table-bordered align-middle">
              <thead class="table-dark">
                <tr>
                  <th scope="col" colspan="6">Moje procházky</th>
                </tr>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Začátek</th>
                  <th scope="col">Konec</th>
                  <th scope="col">Jméno</th>
                  <th scope="col" colspan="2">Popis</th>
                </tr>
              </thead>
              <tbody>
                  {%  for future in future_events %}
                  <tr>
                      <th scope="row">{{ loop.index }}</th>
                      <td>{{ future.start }}</td>
                      <td>{{ future.end }}</td>
                      <td>{{ future.animal.name }}</td>
                      <td>{{ future.description }}</td>
                      <td class="col text-center">
                        <form action="{{ url_for('profile') }}" method="POST">
                        <input type="submit" class="btn btn-danger">Zrušit</input>
                        <input type="hidden" value="{{ future.id }}" name="id" />
                        <input type="hidden" name="_method" value="DELETE" />
                      </form>
                    </td>
                  </tr>
                  {% endfor %}
              </tbody>
            </table>
          </div>
          <div class="tab-pane fade" id="pastEvents" role="tabpanel" aria-labelledby="profile-tab">
            <table class="table table-striped table-bordered align-middle">
              <thead class="table-dark">
                <tr>
                  <th scope="col" colspan="5">Moje procházky</th>
                </tr>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Začátek</th>
                  <th scope="col">Konec</th>
                  <th scope="col">Jméno</th>
                  <th scope="col">Popis</th>
                </tr>
              </thead>
              <tbody>
                  {%  for past in past_events %}
                  <tr>
                      <th scope="row">{{ loop.index }}</th>
                      <td>{{ past.start }}</td>
                      <td>{{ past.end }}</td>
                      <td>{{ past.animal.name }}</td>
                      <td>{{ past.description }}</td>
                  </tr>
                  {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
</div>
</section>

{% endblock %}
